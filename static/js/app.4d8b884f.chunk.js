(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n(0),a=n.n(r),o=n(375),c=n(374),s=n(3),i=n(2),l=n(30),u=n(86),d=n(1),h=function(e){var t=e.navigation;return Object(d.jsxs)(s.a,{style:p.container,children:[Object(d.jsx)(l.a,{source:n(268),resizeMode:"contain",style:p.logo1}),Object(d.jsxs)(s.a,{style:[p.containerrow,{flexDirection:"row"}],children:[Object(d.jsx)(u.a,{title:"Live Chat",style:p.button,color:"#EE0000",onPress:function(){return t.navigate("Chat")}}),"\xa0 \xa0 \xa0 \xa0",Object(d.jsx)(u.a,{title:"History",style:p.button,color:"#EE0000",width:"250",height:"100",onPress:function(){return t.navigate("History")}})]})]})},p=i.a.create({button:{width:250,height:100,marginTop:20},container:{flex:1,backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},containerrow:{backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},logo1:{height:150,width:220}}),f=n(5),b=n.n(f),g=n(23),j=n.n(g),x=n(14),O=n.n(x),m=n(9),y=n.n(m),v=n(96),w=n(21),S=n(100),C=(n(276),n(355),n(353),(0===S.a.apps.length?S.a.initializeApp({apiKey:"AIzaSyDBCB00CkxHXwiAxqtj369EKv5M5OCgslc",authDomain:"pepsi-coolerfan-chat-2d9ab.firebaseapp.com",databaseURL:"gs://pepsi-coolerfan-chat-2d9ab.appspot.com",projectId:"pepsi-coolerfan-chat-2d9ab",storageBucket:"pepsi-coolerfan-chat-2d9ab.appspot.com",messagingSenderId:"967346529141",appId:"1:967346529141:web:87311021ef0ced75a9e93c"}):S.a.app()).firestore()),k=(S.a.auth(),S.a.storage()),_=n(112),P=n(132),A=n(376);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){e.navigation;var t=a.a.useRef(),n=Object(r.useState)([]),o=O()(n,2),c=o[0],i=o[1],h=Object(r.useState)(""),p=O()(h,2),f=p[0],b=p[1],g=Object(r.useState)(""),x=O()(g,2),m=x[0],S=x[1],D=Object(r.useState)(""),I=O()(D,2),U=(I[0],I[1]),F=Object(r.useState)(""),M=O()(F,2),N=M[0],L=M[1],E=Object(r.useState)(""),V=O()(E,2),z=V[0],J=V[1],W=Object(r.useState)(3),q=O()(W,2),B=q[0],H=q[1],G=Object(r.useState)("unread"),K=O()(G,2),Y=K[0],X=K[1],Z="",Q="",$="",ee=Object(r.useState)(""),te=O()(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)([]),oe=O()(ae,2),ce=oe[0],se=oe[1],ie=Object(r.useState)([]),le=O()(ie,2),ue=le[0],de=le[1],he=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return se(""),de(""),e={searchchat:Y},r.prev=3,r.next=6,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_and_log_limit.php",{method:"POST",body:JSON.stringify(e)}));case 6:return t=r.sent,r.next=9,y.a.awrap(t.json());case 9:n=r.sent,se(n),de(n),ye(n[0].shopname,n[0].shopcode,n[0].chatname,n[0].menu),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(3),console.error(r.t0);case 18:case"end":return r.stop()}}),null,null,[[3,15]],Promise)},pe=function(e){if(e){H(0);var t=ue.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));se(t),re(e)}else H(3),se(ue),re(e)},fe=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={chatname:e,status:"no"},r.prev=1,r.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/close_chat.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=r.sent,r.next=7,y.a.awrap(n.json());case 7:"Complete"==r.sent[0].Message&&he(),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),alert(r.t0),console.error(r.t0);case 15:case"end":return r.stop()}}),null,null,[[1,11]],Promise)},be=function(e,t){var n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={shopcode:"admin",chatname:e,menu:t,status:"unread"},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/insert_chat_log_test.php",{method:"POST",body:JSON.stringify(n)}));case 4:return r=a.sent,a.next=7,y.a.awrap(r.json());case 7:a.sent[0].Message,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){var e=setInterval((function(){ge()}),1e3);return function(){clearInterval(e)}}));var ge=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:0==B||(1==B?je():H(B-1));case 1:case"end":return e.stop()}}),null,null,null,Promise)},je=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={searchchat:Y},r.prev=1,r.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_and_log_limit.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=r.sent,r.next=7,y.a.awrap(t.json());case 7:n=r.sent,se(n),de(n),xe(),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(1),console.error(r.t0),H(3);case 17:case"end":return r.stop()}}),null,null,[[1,13]],Promise)},xe=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={shopcode:m,chatname:N,status:"read"},n.prev=1,n.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=n.sent,n.next=7,y.a.awrap(t.json());case 7:n.sent,C.collection(N).where("user._id","==",m).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),H(3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),H(3),console.error(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,12]],Promise)},Oe=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:H(0),X(e),je();case 3:case"end":return t.stop()}}),null,null,null,Promise)},me=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;be(t,n);var r=e[0],a=r._id,o=r.createdAt,c=r.text,s=r.user;r.received;C.collection(t).add({_id:a,createdAt:o,text:c,user:s,received:!1})}),[]),ye=function(e,n,r,a){Q=r,Z=n,$=a,b(n+" ("+e+")"),L(Q),S(Z),U(e),J($),t.current&&t.current(),ve(n,Q)},ve=function(e,n){var r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:C.collection(n).where("user._id","==",e).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),r=C.collection(n).orderBy("createdAt","desc").onSnapshot((function(e){t.current=r,i(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video,received:e.data().received}})))}));case 2:case"end":return a.stop()}}),null,null,null,Promise)},we=Object(r.useState)([]),Se=O()(we,2),Ce=Se[0],ke=Se[1],_e=Object(r.useState)([]),Pe=O()(_e,2),Ae=Pe[0],De=Pe[1],Te=Object(r.useState)([]),Ie=O()(Te,2),Re=(Ie[0],Ie[1]),Ue=Object(r.useState)(0),Fe=O()(Ue,2),Me=(Fe[0],Fe[1]),Ne=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},image:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.image;C.collection(N).add({_id:n,createdAt:r,text:a,user:o,image:c,received:!1}),be(N,z)},Le=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},video:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.video;C.collection(N).add({_id:n,createdAt:r,text:a,user:o,video:c,received:!1}),be(N,z)};return Object(d.jsxs)(s.a,{style:[R.container,{flexDirection:"row"}],children:[Object(d.jsxs)(s.a,{style:{flex:1,backgroundColor:"write"},children:[Object(d.jsx)(P.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return pe(e)},onClear:function(e){return pe("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:ne}),Object(d.jsxs)(s.a,{style:{flexDirection:"row",padding:10,gap:5},children:[Object(d.jsx)(s.a,{style:{flex:1},children:Object(d.jsx)(u.a,{title:"\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19",style:R.button,color:"#FF0000",onPress:function(){return Oe("unread")}})}),Object(d.jsx)(s.a,{style:{flex:1},children:Object(d.jsx)(u.a,{title:"\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27",style:R.button,color:"#006400",onPress:function(){return Oe("read")}})})]}),Object(d.jsx)(v.a,{style:{height:100},ItemSeparatorComponent:function(){return Object(d.jsx)(s.a,{style:R.listItemSeparatorStyle})},sections:[{data:ce}],renderItem:function(e){var t=e.item;return Object(d.jsxs)(s.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(d.jsx)(l.a,{source:{uri:t.displayimage},style:R.Img}),Object(d.jsxs)(w.a,{style:R.sectionListItemStyle,onPress:function(){return function(e,t,n,r){var a,o;return y.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a={shopcode:t,chatname:n,status:"read"},c.prev=1,c.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(a)}));case 4:return o=c.sent,c.next=7,y.a.awrap(o.json());case 7:c.sent,c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),console.error(c.t0);case 13:ye(e,t,n,r);case 14:case"end":return c.stop()}}),null,null,[[1,10]],Promise)}(t.shopname,t.shopcode,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]}),Object(d.jsx)(w.a,{style:{textAlign:"center",backgroundColor:t.chatcolor,fontSize:10,padding:5,marginTop:5,color:"#fff",height:20,width:20,borderRadius:10},children:t.chatcount})]})},keyExtractor:function(e,t){return t}})]}),Object(d.jsxs)(s.a,{style:{flex:2,backgroundColor:"lightgray"},children:[Object(d.jsxs)(s.a,{style:{flexDirection:"row",height:40,padding:0},children:[Object(d.jsx)(s.a,{style:{backgroundColor:"#0089FC",flex:3},children:Object(d.jsx)(w.a,{style:R.titleText,children:f})}),Object(d.jsx)(s.a,{style:{backgroundColor:"#0089FC",flex:.5},children:Object(d.jsx)(u.a,{title:"\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",style:R.button,color:"blue",onPress:function(){return e=N,y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32 "+f)&&fe(e);case 2:case"end":return t.stop()}}),null,null,null,Promise);var e}})})]}),Object(d.jsx)(_.b,{messages:c,showAvatarForEveryMessage:!0,renderBubble:function(e){return Object(d.jsx)(_.a,T(T({},e),{},{tickStyle:{color:e.currentMessage.received?"#00FF00":"#454545"},timeTextStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},textStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},wrapperStyle:{right:{backgroundColor:"rgba(0,102,204,1)",borderRadius:15},left:{backgroundColor:"rgb(255,255,255)",borderRadius:15}},quickReplyStyle:{color:"rgba(0,102,204,1)",borderWidth:2,borderRadius:30,backgroundColor:"rgb(255,255,255)"}}))},renderMessageVideo:function(e){var t=e.currentMessage;return Object(d.jsx)(s.a,{style:{position:"relative",height:150,width:250},children:Object(d.jsx)(A.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video}})})},onSend:function(e){return me(e,N,$)},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"}}),Object(d.jsxs)(s.a,{style:{flexDirection:"row",height:25,padding:0},children:[Object(d.jsx)(s.a,{style:{backgroundColor:"lightgray",flex:2},children:Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"file",id:"upload-file",hidden:!0,onChange:function(e){ke([]),Re([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),ke((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"image/*"}),Object(d.jsx)("label",{for:"upload-file",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"})]})}),Object(d.jsx)(s.a,{style:{backgroundColor:"lightgray",flex:.5},children:Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){var e,t,n,r,a,o,c,s;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=(new Date).getDate(),t=(new Date).getMonth()+1,n=(new Date).getFullYear(),r=(new Date).getHours(),a=(new Date).getMinutes(),o=(new Date).getSeconds(),c="admin_"+n+t+e+r+a+o,s=[],Ce.map((function(e){var t=k.ref("images/"+c).put(e);s.push(t),t.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Me(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(k.ref("images").child(c).getDownloadURL().then((function(e){Ne(e),Re((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},children:"\u0e2a\u0e48\u0e07\u0e23\u0e39\u0e1b"})})}),Object(d.jsx)(s.a,{style:{backgroundColor:"lightgray",flex:2},children:Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"file",id:"upload-file-video",hidden:!0,onChange:function(e){De([]),Re([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),De((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"video/*"}),Object(d.jsx)("label",{for:"upload-file-video",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})]})}),Object(d.jsx)(s.a,{style:{backgroundColor:"lightgray",flex:.5},children:Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){var e,t,n,r,a,o,c,s;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=[],t=(new Date).getDate(),n=(new Date).getMonth()+1,r=(new Date).getFullYear(),a=(new Date).getHours(),o=(new Date).getMinutes(),c=(new Date).getSeconds(),s="admin_"+r+n+t+a+o+c,Ae.map((function(t){var n=k.ref("videos/"+s).put(t);e.push(n),n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Me(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(k.ref("videos").child(s).getDownloadURL().then((function(e){Le(e),Re((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},children:"\u0e2a\u0e48\u0e07\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})})})]})]})]})},R=i.a.create({Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},button:{justifyContent:"center",width:250,height:40,borderRadius:10},buttonchat:{justifyContent:"center",width:250,height:40,borderRadius:10},scroll:{flex:1,marginHorizontal:16}}),U=n(246),F=n(58),M=n(133),N=n(95),L=n(377),E=n(116),V=n(241),z=n.n(V),J=n(242),W=n(148),q=function(e){var t=e.apiData,n=e.fileName;return Object(d.jsx)("button",{onClick:function(e){return function(e,t){var n={Sheets:{data:W.a.json_to_sheet(e)},SheetNames:["data"]},r=W.b(n,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});J.saveAs(a,t+".xlsx")}(t,n)},style:{backgroundColor:"#145A32",height:40,borderRadius:10,color:"#ffffff"},children:"Download Excel"})},B=function(e){e.navigation;var t=Object(r.useState)(!1),n=O()(t,2),a=n[0],o=n[1],c=Object(r.useState)([]),i=O()(c,2),u=i[0],h=i[1],p=Object(r.useState)(""),f=O()(p,2),b=f[0],g=f[1],j=Object(r.useState)(""),x=O()(j,2),m=x[0],S=x[1],k=Object(r.useState)(""),D=O()(k,2),T=D[0],I=D[1],R=Object(r.useState)(""),V=O()(R,2),J=(V[0],V[1]),W=Object(r.useState)(""),B=O()(W,2),G=B[0],K=B[1],Y=Object(r.useState)(""),X=O()(Y,2),Z=X[0],Q=X[1],$=Object(r.useState)(""),ee=O()($,2),te=(ee[0],ee[1]),ne=Object(r.useState)(""),re=O()(ne,2),ae=(re[0],re[1]),oe="",ce=Object(r.useState)(""),se=O()(ce,2),ie=se[0],le=se[1],ue=Object(r.useState)([]),de=O()(ue,2),he=de[0],pe=de[1],fe=Object(r.useState)([]),be=O()(fe,2),ge=be[0],je=be[1],xe=Object(r.useState)([]),Oe=O()(xe,2),me=Oe[0],ye=Oe[1],ve=Object(r.useState)([]),we=O()(ve,2),Se=we[0],Ce=we[1],ke=Object(r.useState)([]),_e=O()(ke,2),Pe=_e[0],Ae=_e[1],De=Object(r.useState)([]),Te=O()(De,2),Ie=Te[0],Re=Te[1],Ue=Object(r.useState)([]),Fe=O()(Ue,2),Me=Fe[0],Ne=Fe[1],Le=Object(r.useState)([]),Ee=O()(Le,2),Ve=Ee[0],ze=Ee[1],Je=Object(r.useState)([]),We=O()(Je,2),qe=We[0],Be=We[1],He=Object(r.useState)([]),Ge=O()(He,2),Ke=Ge[0],Ye=Ge[1],Xe=Object(r.useState)([]),Ze=O()(Xe,2),Qe=Ze[0],$e=Ze[1],et=Object(r.useState)([]),tt=O()(et,2),nt=tt[0],rt=tt[1],at=Object(r.useState)([]),ot=O()(at,2),ct=ot[0],st=ot[1],it=function(e){var t,n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={menu:e},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_menu.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,y.a.awrap(n.json());case 7:r=a.sent,"group1"==e?(pe(r),je(r),dt(r[0].displayimage,r[0].shopname,r[0].shopcode,r[0].tell,r[0].address,r[0].chatname,r[0].menu),gt(r[0].shopcode)):"group2"==e?(ye(r),Ce(r)):"group3"==e?(Ae(r),Re(r)):"group4"==e?(Ne(r),ze(r)):"group5"==e?(Be(r),Ye(r)):""==e&&($e(r),rt(r)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){it("group1"),it("group2"),it("group3"),it("group4"),it("group5"),it("");z.a.get("https://school.treesbot.com/pepsichat/export_chat_all.php").then((function(e){return st(e.data)}))}),[]);var lt=function(e){if(e){var t=ge.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),n=Se.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),r=Ie.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),a=Ve.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),o=Ke.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),c=nt.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));pe(t),ye(n),Ae(r),Ne(a),Be(o),$e(c),le(e)}else pe(ge),ye(Se),Ae(Ie),Ne(Ve),Be(Ke),$e(nt),le(e)},ut=function(e){oe=e,o(!0),function(){var e;y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=C.collection(oe).orderBy("createdAt","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video}})))})),t.abrupt("return",(function(){return e}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}()};var dt=function(e,t,n,r,a,o,c){oe=o,g(n+" ("+t+")"),S(e),J(t),I(n),K(r),Q(a),te(o),ae(c),gt(n)},ht=Object(r.useState)([]),pt=O()(ht,2),ft=pt[0],bt=pt[1],gt=function(e){var t,n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={shopcode:e},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_shopcode.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,y.a.awrap(n.json());case 7:r=a.sent,bt(r),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},jt=function(e){var t="";return"group1"==e?t="\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48":"group2"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25":"group3"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46":"group4"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b":"group5"==e?t="\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a":""==e&&(t="\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32"),t};return Object(d.jsxs)(s.a,{style:[H.container,{flexDirection:"row"}],children:[Object(d.jsxs)(s.a,{style:{flex:1,backgroundColor:"white"},children:[Object(d.jsx)(q,{apiData:ct,fileName:"Export_Chat_Report"}),Object(d.jsx)(P.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return lt(e)},onClear:function(e){return lt("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:ie}),Object(d.jsx)(v.a,{style:{height:100},ItemSeparatorComponent:function(){return Object(d.jsx)(s.a,{style:H.listItemSeparatorStyle})},sections:[{title:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48",data:he},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25",data:me},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46",data:Pe},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b",data:Me},{title:"\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a",data:qe},{title:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32",data:Qe}],renderSectionHeader:function(e){var t=e.section;return Object(d.jsxs)(w.a,{style:H.groupText,children:[" ",t.title," "]})},renderItem:function(e){var t=e.item;return Object(d.jsxs)(s.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(d.jsx)(l.a,{source:{uri:t.displayimage},style:H.Img}),Object(d.jsxs)(w.a,{style:H.sectionListItemStyle,onPress:function(){return dt(t.displayimage,t.shopname,t.shopcode,t.tell,t.address,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]})]})},keyExtractor:function(e,t){return t}})]}),Object(d.jsxs)(s.a,{style:{flex:2,backgroundColor:"#0089FC"},children:[Object(d.jsx)(F.a,{animationType:"slide",transparent:!0,visible:a,onRequestClose:function(){U.a.alert("Modal has been closed."),o(!a)},children:Object(d.jsx)(s.a,{style:H.centeredView,children:Object(d.jsxs)(s.a,{style:H.modalView,children:[Object(d.jsx)(_.b,{messages:u,showAvatarForEveryMessage:!0,renderMessageVideo:function(e){var t=e.currentMessage;return Object(d.jsx)(s.a,{style:{position:"relative",height:150,width:250},children:Object(d.jsx)(A.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video},style:H.video})})},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},renderInputToolbar:function(){return null}}),Object(d.jsx)(M.a,{style:[H.button,H.buttonClose],onPress:function(){return o(!a)},children:Object(d.jsx)(w.a,{style:H.textStyle,children:"\u0e1b\u0e34\u0e14"})})]})})}),Object(d.jsxs)(s.a,{style:{backgroundColor:"white",flexDirection:"row",height:150,padding:0,borderRadius:20,marginTop:20,marginLeft:20,marginRight:20},children:[Object(d.jsx)(s.a,{style:{flex:1},children:Object(d.jsx)(l.a,{source:{uri:m},style:H.Img2})}),Object(d.jsxs)(s.a,{style:{flex:2},children:[Object(d.jsx)(w.a,{style:H.titleText,children:Object(d.jsx)("b",{children:b})}),Object(d.jsxs)(w.a,{style:H.titleText,children:["\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32 : ",T]}),Object(d.jsxs)(w.a,{style:H.titleText,children:["\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d : ",G]}),Object(d.jsxs)(w.a,{style:H.titleText,children:["\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48 : ",Z]})]})]}),Object(d.jsx)(s.a,{style:{backgroundColor:"white",flexDirection:"row",borderRadius:20,marginTop:10,marginLeft:20,marginRight:20,marginBottom:10},children:Object(d.jsxs)(L.a,{children:[Object(d.jsxs)(L.a.Header,{children:[Object(d.jsx)(L.a.Title,{style:{flex:1},children:"No"}),Object(d.jsx)(L.a.Title,{style:{flex:2},children:"Date"}),Object(d.jsx)(L.a.Title,{style:{flex:3},children:"Message"}),Object(d.jsx)(L.a.Title,{style:{flex:1},children:"Action"})]}),Object(d.jsx)(N.a,{data:ft,renderItem:function(e){var t=e.item;return Object(d.jsxs)(L.a.Row,{children:[Object(d.jsx)(L.a.Cell,{style:{flex:1},children:t.num}),Object(d.jsx)(L.a.Cell,{style:{flex:2},children:t.dateinsert}),Object(d.jsx)(L.a.Cell,{style:{flex:3},children:jt(t.menu)}),Object(d.jsx)(L.a.Cell,{style:{flex:1},children:Object(d.jsx)(E.a,{icon:"eye",color:"blue",size:20,onPress:function(){return ut(t.chatname)}})})]})}})]})})]})]})},H=i.a.create({Img:{height:50,width:50,borderRadius:25},Img2:{marginTop:25,marginLeft:50,height:100,width:100,borderRadius:75},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},container2:{backgroundColor:"white",height:400,width:600},groupText:{backgroundColor:"gray",fontSize:18,padding:5,color:"white"},titleText:{fontSize:16,padding:5,color:"black"},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},modalView:{flex:1,margin:20,backgroundColor:"white",borderRadius:20,width:500,height:500,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{borderRadius:20,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{marginBottom:15,textAlign:"center"}}),G=Object(o.a)();function K(){return Object(d.jsx)(c.a,{children:Object(d.jsxs)(G.Navigator,{screenOptions:{headerTitleAlign:"center"},children:[Object(d.jsx)(G.Screen,{name:"Menu",component:h}),Object(d.jsx)(G.Screen,{name:"Chat",component:I}),Object(d.jsx)(G.Screen,{name:"History",component:B})]})})}},260:function(e,t,n){e.exports=n(351)},268:function(e,t,n){e.exports=n.p+"static/media/Pepsi-Logo.32560c85.png"}},[[260,1,2]]]);
//# sourceMappingURL=app.4d8b884f.chunk.js.map