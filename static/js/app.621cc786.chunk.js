(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{255:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n(0),a=n.n(r),o=n(379),s=n(378),c=n(3),i=n(2),l=n(30),u=n(58),d=n(1),h=function(e){var t=e.navigation;return Object(d.jsxs)(c.a,{style:p.container,children:[Object(d.jsx)(l.a,{source:n(269),resizeMode:"contain",style:p.logo1}),Object(d.jsxs)(c.a,{style:[p.containerrow,{flexDirection:"row"}],children:[Object(d.jsx)(u.a,{title:"Live Chat",style:p.button,color:"#EE0000",onPress:function(){return t.navigate("Chat")}}),"\xa0 \xa0 \xa0 \xa0",Object(d.jsx)(u.a,{title:"History",style:p.button,color:"#EE0000",width:"250",height:"100",onPress:function(){return t.navigate("History")}})]})]})},p=i.a.create({button:{width:250,height:100,marginTop:20},container:{flex:1,backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},containerrow:{backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},logo1:{height:150,width:220}}),g=n(5),f=n.n(g),b=n(23),j=n.n(b),m=n(12),x=n.n(m),O=n(7),y=n.n(O),v=n(87),w=n(20),S=n(102),C=(n(277),n(358),n(356),(0===S.a.apps.length?S.a.initializeApp({apiKey:"AIzaSyDBCB00CkxHXwiAxqtj369EKv5M5OCgslc",authDomain:"pepsi-coolerfan-chat-2d9ab.firebaseapp.com",databaseURL:"gs://pepsi-coolerfan-chat-2d9ab.appspot.com",projectId:"pepsi-coolerfan-chat-2d9ab",storageBucket:"pepsi-coolerfan-chat-2d9ab.appspot.com",messagingSenderId:"967346529141",appId:"1:967346529141:web:87311021ef0ced75a9e93c"}):S.a.app()).firestore()),_=(S.a.auth(),S.a.storage()),k=n(83),M=n(107),D=n(380);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.navigation,n=a.a.useRef(),o=Object(r.useState)([]),s=x()(o,2),i=s[0],h=s[1],p=Object(r.useState)(""),g=x()(p,2),f=g[0],b=g[1],m=Object(r.useState)(""),O=x()(m,2),S=O[0],P=O[1],T=Object(r.useState)(""),I=x()(T,2),F=(I[0],I[1]),L=Object(r.useState)(""),N=x()(L,2),U=N[0],E=N[1],B=Object(r.useState)(""),W=x()(B,2),V=W[0],z=W[1],J=Object(r.useState)(3),q=x()(J,2),G=q[0],H=q[1],Y=Object(r.useState)("unread"),K=x()(Y,2),X=K[0],Z=K[1],Q="",$="",ee="",te=Object(r.useState)(""),ne=x()(te,2),re=ne[0],ae=ne[1],oe=Object(r.useState)([]),se=x()(oe,2),ce=se[0],ie=se[1],le=Object(r.useState)([]),ue=x()(le,2),de=ue[0],he=ue[1],pe=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return ie([]),he([]),e={searchchat:X},r.prev=3,r.next=6,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/select_user_and_log_limit.php",{method:"POST",body:JSON.stringify(e)}));case 6:return t=r.sent,r.next=9,y.a.awrap(t.json());case 9:"Not Complete"!=(n=r.sent)[0].Message&&(ie(n[0].Message),he(n[0].Message),we(n[0].Message[0].shopname,n[0].Message[0].shopcode,n[0].Message[0].chatname,n[0].Message[0].menu)),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),console.error(r.t0);case 16:case"end":return r.stop()}}),null,null,[[3,13]],Promise)},ge=function(e){if(e){H(0);var t=de.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));ie(t),ae(e)}else H(3),ie(de),ae(e)},fe=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={chatname:e,status:"no"},r.prev=1,r.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/close_chat.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=r.sent,r.next=7,y.a.awrap(n.json());case 7:"Complete"==r.sent[0].Message&&pe(),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),alert(r.t0),console.error(r.t0);case 15:case"end":return r.stop()}}),null,null,[[1,11]],Promise)},be=function(e,t){var n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={shopcode:"admin",chatname:e,menu:t,status:"unread"},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/insert_chat_log_test.php",{method:"POST",body:JSON.stringify(n)}));case 4:return r=a.sent,a.next=7,y.a.awrap(r.json());case 7:a.sent[0].Message,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){var e=setInterval((function(){je()}),1e3);return function(){clearInterval(e)}}));var je=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:0==G||(1==G?me():H(G-1));case 1:case"end":return e.stop()}}),null,null,null,Promise)},me=function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={searchchat:X},r.prev=1,r.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/select_user_and_log_limit.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=r.sent,r.next=7,y.a.awrap(t.json());case 7:"Not Complete"!=(n=r.sent)[0].Message?(ie(n[0].Message),he(n[0].Message),Oe()):(ie([]),he([])),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),console.error(r.t0),H(3);case 15:case"end":return r.stop()}}),null,null,[[1,11]],Promise)},xe=function(e){var t,n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={searchchat:e},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/select_user_and_log_limit.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,y.a.awrap(n.json());case 7:"Not Complete"!=(r=a.sent)[0].Message?(ie(r[0].Message),he(r[0].Message),Oe()):(ie([]),he([])),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0),H(3);case 15:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},Oe=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={shopcode:S,chatname:U,status:"read"},n.prev=1,n.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/update_chat_log_web.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=n.sent,n.next=7,y.a.awrap(t.json());case 7:n.sent,C.collection(U).where("user._id","==",S).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),H(3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),H(3),console.error(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,12]],Promise)},ye=function(e){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:H(0),Z(e),xe(e);case 3:case"end":return t.stop()}}),null,null,null,Promise)},ve=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;be(t,n);var r=e[0],a=r._id,o=r.createdAt,s=r.text,c=r.user;r.received;C.collection(t).add({_id:a,createdAt:o,text:s,user:c,received:!1})}),[]),we=function(e,t,r,a){$=r,Q=t,ee=a,b(t+" ("+e+")"),E($),P(Q),F(e),z(ee),n.current&&n.current(),Se(t,$)},Se=function(e,t){var r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:C.collection(t).where("user._id","==",e).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),r=C.collection(t).orderBy("createdAt","desc").onSnapshot((function(e){n.current=r,h(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video,received:e.data().received}})))}));case 2:case"end":return a.stop()}}),null,null,null,Promise)},Ce=Object(r.useState)([]),_e=x()(Ce,2),ke=_e[0],Me=_e[1],De=Object(r.useState)([]),Pe=x()(De,2),Ae=Pe[0],Te=Pe[1],Re=Object(r.useState)([]),Ie=x()(Re,2),Fe=(Ie[0],Ie[1]),Le=Object(r.useState)(0),Ne=x()(Le,2),Ue=(Ne[0],Ne[1]),Ee=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},image:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,s=t.image;C.collection(U).add({_id:n,createdAt:r,text:a,user:o,image:s,received:!1}),be(U,V)},Be=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},video:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,s=t.video;C.collection(U).add({_id:n,createdAt:r,text:a,user:o,video:s,received:!1}),be(U,V)};return Object(d.jsxs)(c.a,{style:[R.container,{flexDirection:"row"}],children:[Object(d.jsxs)(c.a,{style:{flex:1,backgroundColor:"write"},children:[Object(d.jsx)(c.a,{style:R.styleNewChatBtn,children:Object(d.jsx)(u.a,{color:"#0a7e07",onPress:function(){return t.navigate("LiveChat")},title:"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e43\u0e2b\u0e21\u0e48"})}),Object(d.jsx)(M.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return ge(e)},onClear:function(e){return ge("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:re}),Object(d.jsxs)(c.a,{style:{flexDirection:"row",padding:10,gap:5},children:[Object(d.jsx)(c.a,{style:{flex:1},children:Object(d.jsx)(u.a,{title:"\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19",style:R.button,color:"#FF0000",onPress:function(){return ye("unread")}})}),Object(d.jsx)(c.a,{style:{flex:1},children:Object(d.jsx)(u.a,{title:"\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27",style:R.button,color:"#006400",onPress:function(){return ye("read")}})})]}),Object(d.jsx)(v.a,{style:{height:100},ItemSeparatorComponent:function(){return Object(d.jsx)(c.a,{style:R.listItemSeparatorStyle})},sections:[{data:ce}],renderItem:function(e){var t=e.item;return Object(d.jsxs)(c.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(d.jsx)(l.a,{source:{uri:t.displayimage},style:R.Img}),Object(d.jsxs)(c.a,{style:{flexDirection:"column"},children:[Object(d.jsxs)(w.a,{style:R.sectionListItemStyle,onPress:function(){return function(e,t,n,r){var a,o;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a={shopcode:t,chatname:n,status:"read"},s.prev=1,s.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/update_chat_log_web.php",{method:"POST",body:JSON.stringify(a)}));case 4:return o=s.sent,s.next=7,y.a.awrap(o.json());case 7:s.sent,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.error(s.t0);case 13:we(e,t,n,r);case 14:case"end":return s.stop()}}),null,null,[[1,10]],Promise)}(t.shopname,t.shopcode,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]}),Object(d.jsx)(w.a,{style:R.sectionListItemStyle2,children:t.lasttime})]}),Object(d.jsx)(w.a,{style:{textAlign:"center",backgroundColor:t.chatcolor,fontSize:10,padding:5,marginTop:5,color:"#fff",height:20,width:20,borderRadius:10},children:t.chatcount})]})},keyExtractor:function(e,t){return t}})]}),Object(d.jsxs)(c.a,{style:{flex:2,backgroundColor:"lightgray"},children:[Object(d.jsxs)(c.a,{style:{flexDirection:"row",height:30,padding:0},children:[Object(d.jsx)(c.a,{style:{backgroundColor:"#0089FC",flex:3},children:Object(d.jsx)(w.a,{style:R.titleText,children:f})}),Object(d.jsx)(c.a,{style:{backgroundColor:"#0089FC",flex:.5},children:Object(d.jsx)(u.a,{title:"\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",style:R.button,color:"blue",onPress:function(){return e=U,y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32 "+f)&&fe(e);case 2:case"end":return t.stop()}}),null,null,null,Promise);var e}})})]}),Object(d.jsx)(k.b,{messages:i,showAvatarForEveryMessage:!0,renderBubble:function(e){return Object(d.jsx)(k.a,A(A({},e),{},{tickStyle:{color:e.currentMessage.received?"#00FF00":"#454545"},timeTextStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},textStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},wrapperStyle:{right:{backgroundColor:"rgba(0,102,204,1)",borderRadius:15},left:{backgroundColor:"rgb(255,255,255)",borderRadius:15}},quickReplyStyle:{color:"rgba(0,102,204,1)",borderWidth:2,borderRadius:30,backgroundColor:"rgb(255,255,255)"}}))},renderMessageVideo:function(e){var t=e.currentMessage;return Object(d.jsx)(c.a,{style:{position:"relative",height:150,width:250},children:Object(d.jsx)(D.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video}})})},onSend:function(e){return ve(e,U,ee)},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"}}),Object(d.jsxs)(c.a,{style:{flexDirection:"row",height:30,padding:0},children:[Object(d.jsx)(c.a,{style:{backgroundColor:"#AED6F1",flex:2},children:Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",id:"upload-file",onChange:function(e){Me([]),Fe([]),console.log("handleChange1 ==== ",e.target.files.length);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),Me((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"image/*"})})}),Object(d.jsx)(c.a,{style:R.styleSendImageBtn,children:Object(d.jsx)(u.a,{color:"#2E86C1",onPress:function(){return function(){var e,t,n,r,a,o,s,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=(new Date).getDate(),t=(new Date).getMonth()+1,n=(new Date).getFullYear(),r=(new Date).getHours(),a=(new Date).getMinutes(),o=(new Date).getSeconds(),s="admin_"+n+t+e+r+a+o,c=[],ke.map((function(e){var t=_.ref("images/"+s).put(e);c.push(t),t.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Ue(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(_.ref("images").child(s).getDownloadURL().then((function(e){Ee(e),Fe((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)}()},title:"\u0e2a\u0e48\u0e07\u0e23\u0e39\u0e1b"})}),Object(d.jsx)(c.a,{style:{backgroundColor:"#A9CCE3",flex:2},children:Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",id:"upload-file-video",onChange:function(e){Te([]),Fe([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),Te((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"video/*"})})}),Object(d.jsx)(c.a,{style:R.styleSendImageBtn,children:Object(d.jsx)(u.a,{color:"#2E86C1",onPress:function(){return function(){var e,t,n,r,a,o,s,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=[],t=(new Date).getDate(),n=(new Date).getMonth()+1,r=(new Date).getFullYear(),a=(new Date).getHours(),o=(new Date).getMinutes(),s=(new Date).getSeconds(),c="admin_"+r+n+t+a+o+s,Ae.map((function(t){var n=_.ref("videos/"+c).put(t);e.push(n),n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Ue(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(_.ref("videos").child(c).getDownloadURL().then((function(e){Be(e),Fe((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)}()},title:"\u0e2a\u0e48\u0e07\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})})]})]})]})},R=i.a.create({Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,paddingTop:15,paddingRight:15,paddingLeft:15,color:"#000",backgroundColor:"white"},sectionListItemStyle2:{fontSize:8,color:"gray",paddingLeft:15,paddingRight:15,backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},buttonNewChat:{justifyContent:"center",width:250,height:40,borderRadius:10},button:{justifyContent:"center",width:250,height:40,borderRadius:10},buttonchat:{justifyContent:"center",width:250,height:40,borderRadius:10},scroll:{flex:1,marginHorizontal:16},styleNewChatBtn:{marginTop:10,marginLeft:60,marginRight:60,borderWidth:2,borderRadius:20,borderColor:"#056f00",overflow:"hidden",marginBottom:10},styleSendImageBtn:{flex:.5,backgroundColor:"#2E86C1",marginTop:0,marginLeft:0,marginRight:0,overflow:"hidden",marginBottom:0}}),I=n(247),F=n(59),L=n(132),N=n(98),U=n(381),E=n(117),B=n(242),W=n.n(B),V=n(243),z=n(148),J=function(e){var t=e.apiData,n=e.fileName;return Object(d.jsx)("button",{onClick:function(e){return function(e,t){var n={Sheets:{data:z.a.json_to_sheet(e)},SheetNames:["data"]},r=z.b(n,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});V.saveAs(a,t+".xlsx")}(t,n)},style:{backgroundColor:"#145A32",height:40,borderRadius:10,color:"#ffffff"},children:"Download Excel"})},q=function(e){e.navigation;var t=Object(r.useState)(!1),n=x()(t,2),a=n[0],o=n[1],s=Object(r.useState)([]),i=x()(s,2),u=i[0],h=i[1],p=Object(r.useState)(""),g=x()(p,2),f=g[0],b=g[1],j=Object(r.useState)(""),m=x()(j,2),O=m[0],S=m[1],_=Object(r.useState)(""),P=x()(_,2),A=P[0],T=P[1],R=Object(r.useState)(""),B=x()(R,2),V=(B[0],B[1]),z=Object(r.useState)(""),q=x()(z,2),H=q[0],Y=q[1],K=Object(r.useState)(""),X=x()(K,2),Z=X[0],Q=X[1],$=Object(r.useState)(""),ee=x()($,2),te=(ee[0],ee[1]),ne=Object(r.useState)(""),re=x()(ne,2),ae=(re[0],re[1]),oe="",se=Object(r.useState)(""),ce=x()(se,2),ie=ce[0],le=ce[1],ue=Object(r.useState)([]),de=x()(ue,2),he=de[0],pe=de[1],ge=Object(r.useState)([]),fe=x()(ge,2),be=fe[0],je=fe[1],me=Object(r.useState)([]),xe=x()(me,2),Oe=xe[0],ye=xe[1],ve=Object(r.useState)([]),we=x()(ve,2),Se=we[0],Ce=we[1],_e=Object(r.useState)([]),ke=x()(_e,2),Me=ke[0],De=ke[1],Pe=Object(r.useState)([]),Ae=x()(Pe,2),Te=Ae[0],Re=Ae[1],Ie=Object(r.useState)([]),Fe=x()(Ie,2),Le=Fe[0],Ne=Fe[1],Ue=Object(r.useState)([]),Ee=x()(Ue,2),Be=Ee[0],We=Ee[1],Ve=Object(r.useState)([]),ze=x()(Ve,2),Je=ze[0],qe=ze[1],Ge=Object(r.useState)([]),He=x()(Ge,2),Ye=He[0],Ke=He[1],Xe=Object(r.useState)([]),Ze=x()(Xe,2),Qe=Ze[0],$e=Ze[1],et=Object(r.useState)([]),tt=x()(et,2),nt=tt[0],rt=tt[1],at=Object(r.useState)([]),ot=x()(at,2),st=ot[0],ct=ot[1],it=Object(r.useState)([]),lt=x()(it,2),ut=lt[0],dt=lt[1],ht=Object(r.useState)([]),pt=x()(ht,2),gt=pt[0],ft=pt[1],bt=function(e){var t,n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={menu:e},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/select_user_menu.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,y.a.awrap(n.json());case 7:"Not Complete"!=(r=a.sent)[0].Message&&("group1"==e?(pe(r[0].Message),je(r[0].Message),xt(r[0].Message[0].displayimage,r[0].Message[0].shopname,r[0].Message[0].shopcode,r[0].Message[0].tell,r[0].Message[0].address,r[0].Message[0].chatname,r[0].Message[0].menu),St(r[0].shopcode)):"group2"==e?(ye(r[0].Message),Ce(r[0].Message)):"group3"==e?(De(r[0].Message),Re(r[0].Message)):"group4"==e?(Ne(r[0].Message),We(r[0].Message)):"group5"==e?(qe(r[0].Message),Ke(r[0].Message)):"admin"==e?(ct(r[0].Message),dt(r[0].Message)):""==e&&($e(r[0].Message),rt(r[0].Message))),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){bt("group1"),bt("group2"),bt("group3"),bt("group4"),bt("group5"),bt("admin"),bt("");W.a.get("https://school.treesbot.com/pepsichat_test/export_chat_all.php").then((function(e){return ft(e.data)}))}),[]);var jt=function(e){if(e){var t=be.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),n=Se.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),r=Te.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),a=Be.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),o=Ye.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),s=nt.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),c=ut.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));pe(t),ye(n),De(r),Ne(a),qe(o),$e(s),$e(c),le(e)}else pe(be),ye(Se),De(Te),Ne(Be),qe(Ye),$e(nt),ct(ut),le(e)},mt=function(e){oe=e,o(!0),function(){var e;y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=C.collection(oe).orderBy("createdAt","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video}})))})),t.abrupt("return",(function(){return e}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}()};var xt=function(e,t,n,r,a,o,s){oe=o,b(n+" ("+t+")"),S(e),V(t),T(n),Y(r),Q(a),te(o),ae(s),St(n)},Ot=Object(r.useState)([]),yt=x()(Ot,2),vt=yt[0],wt=yt[1],St=function(e){var t,n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={shopcode:e},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/select_user_shopcode.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,y.a.awrap(n.json());case 7:"Not Complete"!=(r=a.sent)[0].Message&&wt(r[0].Message),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},Ct=function(e){var t="";return"group1"==e?t="\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48":"group2"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25":"group3"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46":"group4"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b":"group5"==e?t="\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a":"admin"==e?t="\u0e41\u0e2d\u0e14\u0e21\u0e34\u0e14\u0e40\u0e23\u0e34\u0e48\u0e21\u0e2a\u0e19\u0e17\u0e19\u0e32":""==e&&(t="\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32"),t};return Object(d.jsxs)(c.a,{style:[G.container,{flexDirection:"row"}],children:[Object(d.jsxs)(c.a,{style:{flex:1,backgroundColor:"white"},children:[Object(d.jsx)(J,{apiData:gt,fileName:"Export_Chat_Report"}),Object(d.jsx)(M.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return jt(e)},onClear:function(e){return jt("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:ie}),Object(d.jsx)(v.a,{style:{height:100},ItemSeparatorComponent:function(){return Object(d.jsx)(c.a,{style:G.listItemSeparatorStyle})},sections:[{title:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48",data:he},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25",data:Oe},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46",data:Me},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b",data:Le},{title:"\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a",data:Je},{title:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32",data:Qe},{title:"\u0e41\u0e2d\u0e14\u0e21\u0e34\u0e19\u0e40\u0e23\u0e34\u0e48\u0e21\u0e2a\u0e19\u0e17\u0e19\u0e32",data:st}],renderSectionHeader:function(e){var t=e.section;return Object(d.jsxs)(w.a,{style:G.groupText,children:[" ",t.title," "]})},renderItem:function(e){var t=e.item;return Object(d.jsxs)(c.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(d.jsx)(l.a,{source:{uri:t.displayimage},style:G.Img}),Object(d.jsxs)(w.a,{style:G.sectionListItemStyle,onPress:function(){return xt(t.displayimage,t.shopname,t.shopcode,t.tell,t.address,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]})]})},keyExtractor:function(e,t){return t}})]}),Object(d.jsxs)(c.a,{style:{flex:2,backgroundColor:"#0089FC"},children:[Object(d.jsx)(F.a,{animationType:"slide",transparent:!0,visible:a,onRequestClose:function(){I.a.alert("Modal has been closed."),o(!a)},children:Object(d.jsx)(c.a,{style:G.centeredView,children:Object(d.jsxs)(c.a,{style:G.modalView,children:[Object(d.jsx)(k.b,{messages:u,showAvatarForEveryMessage:!0,renderMessageVideo:function(e){var t=e.currentMessage;return Object(d.jsx)(c.a,{style:{position:"relative",height:150,width:250},children:Object(d.jsx)(D.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video},style:G.video})})},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},renderInputToolbar:function(){return null}}),Object(d.jsx)(L.a,{style:[G.button,G.buttonClose],onPress:function(){return o(!a)},children:Object(d.jsx)(w.a,{style:G.textStyle,children:"\u0e1b\u0e34\u0e14"})})]})})}),Object(d.jsxs)(c.a,{style:{backgroundColor:"white",flexDirection:"row",height:150,padding:0,borderRadius:20,marginTop:20,marginLeft:20,marginRight:20},children:[Object(d.jsx)(c.a,{style:{flex:1},children:Object(d.jsx)(l.a,{source:{uri:O},style:G.Img2})}),Object(d.jsxs)(c.a,{style:{flex:2},children:[Object(d.jsx)(w.a,{style:G.titleText,children:Object(d.jsx)("b",{children:f})}),Object(d.jsxs)(w.a,{style:G.titleText,children:["\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32 : ",A]}),Object(d.jsxs)(w.a,{style:G.titleText,children:["\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d : ",H]}),Object(d.jsxs)(w.a,{style:G.titleText,children:["\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48 : ",Z]})]})]}),Object(d.jsx)(c.a,{style:{backgroundColor:"white",flexDirection:"row",borderRadius:20,marginTop:10,marginLeft:20,marginRight:20,marginBottom:10},children:Object(d.jsxs)(U.a,{children:[Object(d.jsxs)(U.a.Header,{children:[Object(d.jsx)(U.a.Title,{style:{flex:1},children:"No"}),Object(d.jsx)(U.a.Title,{style:{flex:2},children:"Date"}),Object(d.jsx)(U.a.Title,{style:{flex:3},children:"Message"}),Object(d.jsx)(U.a.Title,{style:{flex:1},children:"Action"})]}),Object(d.jsx)(N.a,{data:vt,renderItem:function(e){var t=e.item;return Object(d.jsxs)(U.a.Row,{children:[Object(d.jsx)(U.a.Cell,{style:{flex:1},children:t.num}),Object(d.jsx)(U.a.Cell,{style:{flex:2},children:t.dateinsert}),Object(d.jsx)(U.a.Cell,{style:{flex:3},children:Ct(t.menu)}),Object(d.jsx)(U.a.Cell,{style:{flex:1},children:Object(d.jsx)(E.a,{icon:"eye",color:"blue",size:20,onPress:function(){return mt(t.chatname)}})})]})}})]})})]})]})},G=i.a.create({Img:{height:50,width:50,borderRadius:25},Img2:{marginTop:25,marginLeft:50,height:100,width:100,borderRadius:75},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},container2:{backgroundColor:"white",height:400,width:600},groupText:{backgroundColor:"gray",fontSize:18,padding:5,color:"white"},titleText:{fontSize:16,padding:5,color:"black"},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},modalView:{flex:1,margin:20,backgroundColor:"white",borderRadius:20,width:500,height:500,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{borderRadius:20,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{marginBottom:15,textAlign:"center"}}),H=n(81);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){e.navigation;var t=a.a.useState(""),n=x()(t,2),o=n[0],s=n[1],i=Object(r.useState)("hide"),l=x()(i,2),h=l[0],p=l[1],g=a.a.useRef(),f=Object(r.useState)([]),b=x()(f,2),m=b[0],O=b[1],v=Object(r.useState)(""),S=x()(v,2),M=S[0],P=S[1],A=Object(r.useState)(""),T=x()(A,2),R=(T[0],T[1]),I=Object(r.useState)(""),F=x()(I,2),L=(F[0],F[1]),N=Object(r.useState)(""),U=x()(N,2),E=U[0],B=U[1],W=Object(r.useState)(""),V=x()(W,2),z=V[0],J=V[1],q="",G="",Y="",X=function(e,t){var n,r;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={shopcode:"admin",chatname:e,menu:t,status:"unread"},a.prev=1,a.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/insert_chat_log_test.php",{method:"POST",body:JSON.stringify(n)}));case 4:return r=a.sent,a.next=7,y.a.awrap(r.json());case 7:a.sent[0].Message,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},Q=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;X(t,n);var r=e[0],a=r._id,o=r.createdAt,s=r.text,c=r.user;r.received;C.collection(t).add({_id:a,createdAt:o,text:s,user:c,received:!1})}),[]),$=function(e,t,n,r){var a,o;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a={shopcode:t,chatname:n,status:"read"},s.prev=1,s.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/update_chat_log_web.php",{method:"POST",body:JSON.stringify(a)}));case 4:return o=s.sent,s.next=7,y.a.awrap(o.json());case 7:s.sent,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.error(s.t0);case 13:ee(e,t,n,r);case 14:case"end":return s.stop()}}),null,null,[[1,10]],Promise)},ee=function(e,t,n,r){G=n,q=t,Y=r,P(t+" ("+e+")"),B(G),R(q),L(e),J(Y),g.current&&g.current(),te(t,G)},te=function(e,t){var n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:C.collection(t).where("user._id","==",e).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),n=C.collection(t).orderBy("createdAt","desc").onSnapshot((function(e){g.current=n,O(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video,received:e.data().received}})))}));case 2:case"end":return r.stop()}}),null,null,null,Promise)},ne=Object(r.useState)([]),re=x()(ne,2),ae=re[0],oe=re[1],se=Object(r.useState)([]),ce=x()(se,2),ie=ce[0],le=ce[1],ue=Object(r.useState)([]),de=x()(ue,2),he=(de[0],de[1]),pe=Object(r.useState)(0),ge=x()(pe,2),fe=(ge[0],ge[1]),be=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},image:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,s=t.image;C.collection(E).add({_id:n,createdAt:r,text:a,user:o,image:s,received:!1}),X(E,z)},je=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},video:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,s=t.video;C.collection(E).add({_id:n,createdAt:r,text:a,user:o,video:s,received:!1}),X(E,z)},me=function(e,t,n,r,a,o){var s,c,i;return y.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return s={shopcode:r},l.prev=1,l.next=4,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/newchat_select_shopcode.php",{method:"POST",body:JSON.stringify(s)}));case 4:return c=l.sent,l.next=7,y.a.awrap(c.json());case 7:"Not Complete"!=(i=l.sent)[0].Message?(console.log("selectShopcode === ",i),p("show"),$(i[0].Message[0].shopname,i[0].Message[0].shopcode,i[0].Message[0].chatname,i[0].Message[0].menu)):xe(e,t,n,r,a,o),l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),console.error(l.t0);case 14:case"end":return l.stop()}}),null,null,[[1,11]],Promise)},xe=function(e,t,n,r,a,o){var s,c,i,l,u,d,h,g,f,b,j;return y.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return s=(new Date).getDate(),c=(new Date).getMonth()+1,i=(new Date).getFullYear(),l=(new Date).getHours(),u=(new Date).getMinutes(),d=(new Date).getSeconds(),"yes",f={shopcode:r,displayname:e,displayimage:t,shopname:a,address:o,tell:n,chatname:h=r+"_"+i+c+s+l+u+d,menu:g="admin",status:"yes"},m.prev=10,m.next=13,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/newchat_insert_shop.php",{method:"POST",body:JSON.stringify(f)}));case 13:return b=m.sent,m.next=16,y.a.awrap(b.json());case 16:j=m.sent,console.log("insert_user === ",j),"Complete"==j[0].Message?(p("show"),$(a,r,h,g)):"Error"==j[0].Message?window.confirm("\u0e40\u0e23\u0e34\u0e48\u0e21\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 \n \u0e01\u0e23\u0e38\u0e13\u0e32\u0e25\u0e2d\u0e07\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"):$(j[0].Message.shopname,j[0].Message.shopcode,j[0].Message.chatname,j[0].Message.menu),m.next=24;break;case 21:m.prev=21,m.t0=m.catch(10),console.error(m.t0);case 24:case"end":return m.stop()}}),null,null,[[10,21]],Promise)};return Object(d.jsxs)(c.a,{style:[Z.container,{flexDirection:"column",height:"100%"}],children:[Object(d.jsxs)(c.a,{style:{justifyContent:"center",backgroundColor:"white",height:60,flexDirection:"row",marginTop:0},children:[Object(d.jsx)(H.a,{style:Z.input,onChangeText:function(e){return s(e.toUpperCase())},maxLength:10,value:o,placeholder:"\u0e01\u0e23\u0e2d\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32"}),Object(d.jsx)(c.a,{style:Z.styleNewChatBtn,children:Object(d.jsx)(u.a,{color:"#0a7e07",onPress:function(){return function(){var e,t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("checkShopcode shopcode =====",o),""!=o&&10==o.length){r.next=6;break}p("hide"),window.confirm("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a 10 \u0e2b\u0e25\u0e31\u0e01"),r.next=21;break;case 6:return e={shopcode:o},r.prev=7,r.next=10,y.a.awrap(fetch("https://school.treesbot.com/pepsichat_test/newchat_check_shopcode.php",{method:"POST",body:JSON.stringify(e)}));case 10:return t=r.sent,r.next=13,y.a.awrap(t.json());case 13:(n=r.sent).status?(console.log("checkShopcode === ",n),me(n.displayname,n.displayimage,n.mobileno,n.shopcode,n.shop_name,n.address)):(console.log("checkShopcode === error",n),p("hide"),window.confirm("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1b\u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a\u0e02\u0e2d\u0e07\u0e23\u0e49\u0e32\u0e19 "+o+" \u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e23\u0e34\u0e48\u0e21\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e44\u0e14\u0e49")),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(7),p("hide"),console.error(r.t0);case 21:case"end":return r.stop()}}),null,null,[[7,17]],Promise)}()},title:"\u0e04\u0e49\u0e19\u0e2b\u0e32"})})]}),"hide"==h?Object(d.jsx)(c.a,{style:{backgroundColor:"white",flex:1}}):Object(d.jsxs)(c.a,{style:{backgroundColor:"lightgray",flex:1,marginTop:0,marginBottom:20,marginLeft:100,marginRight:100,borderWidth:2,borderRadius:10,borderColor:"#0089FC"},children:[Object(d.jsx)(c.a,{style:{flexDirection:"row",height:40,paddingLeft:20,paddingRight:20,paddingTop:0,paddingBottom:0,borderWidth:2,borderRadius:5,borderColor:"#0089FC",backgroundColor:"#0089FC"},children:Object(d.jsx)(c.a,{style:{flex:1},children:Object(d.jsx)(w.a,{style:Z.titleText,children:M})})}),Object(d.jsx)(k.b,{messages:m,showAvatarForEveryMessage:!0,renderBubble:function(e){return Object(d.jsx)(k.a,K(K({},e),{},{tickStyle:{color:e.currentMessage.received?"#00FF00":"#454545"},timeTextStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},textStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},wrapperStyle:{right:{backgroundColor:"rgba(0,102,204,1)",borderRadius:15},left:{backgroundColor:"rgb(255,255,255)",borderRadius:15}},quickReplyStyle:{color:"rgba(0,102,204,1)",borderWidth:2,borderRadius:30,backgroundColor:"rgb(255,255,255)"}}))},renderMessageVideo:function(e){var t=e.currentMessage;return Object(d.jsx)(c.a,{style:{position:"relative",height:150,width:250},children:Object(d.jsx)(D.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video}})})},onSend:function(e){return Q(e,E,Y)},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"}}),Object(d.jsxs)(c.a,{style:{flexDirection:"row",height:30,marginBottom:0},children:[Object(d.jsx)(c.a,{style:{backgroundColor:"#AED6F1",flex:2},children:Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",id:"upload-file",onChange:function(e){oe([]),he([]),console.log("handleChange2 ==== ",e.target.files.length);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),oe((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"image/*"})})}),Object(d.jsx)(c.a,{style:Z.styleSendImageBtn,children:Object(d.jsx)(u.a,{color:"#2E86C1",onPress:function(){return function(){var e,t,n,r,a,o,s,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=(new Date).getDate(),t=(new Date).getMonth()+1,n=(new Date).getFullYear(),r=(new Date).getHours(),a=(new Date).getMinutes(),o=(new Date).getSeconds(),s="admin_"+n+t+e+r+a+o,c=[],ae.map((function(e){var t=_.ref("images/"+s).put(e);c.push(t),t.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);fe(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(_.ref("images").child(s).getDownloadURL().then((function(e){be(e),he((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)}()},title:"\u0e2a\u0e48\u0e07\u0e23\u0e39\u0e1b"})}),Object(d.jsx)(c.a,{style:{backgroundColor:"#AED6F1",flex:2},children:Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",id:"upload-file-video",onChange:function(e){le([]),he([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),le((function(e){return[].concat(j()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"video/*"})})}),Object(d.jsx)(c.a,{style:Z.styleSendImageBtn,children:Object(d.jsx)(u.a,{color:"#2E86C1",onPress:function(){return function(){var e,t,n,r,a,o,s,c;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=[],t=(new Date).getDate(),n=(new Date).getMonth()+1,r=(new Date).getFullYear(),a=(new Date).getHours(),o=(new Date).getMinutes(),s=(new Date).getSeconds(),c="admin_"+r+n+t+a+o+s,ie.map((function(t){var n=_.ref("videos/"+c).put(t);e.push(n),n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);fe(t)}),(function(e){console.log(e)}),(function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(_.ref("videos").child(c).getDownloadURL().then((function(e){je(e),he((function(t){return[].concat(j()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)}()},title:"\u0e2a\u0e48\u0e07\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})})]})]})]})},Z=i.a.create({container:{backgroundColor:"white"},input:{height:40,width:200,marginLeft:40,marginTop:10,marginBottom:10,borderWidth:1,borderRadius:10,borderColor:"darkgray",padding:10},styleNewChatBtn:{width:80,height:39,marginTop:10,marginBottom:10,marginLeft:10,borderWidth:2,borderRadius:20,borderColor:"#056f00",overflow:"hidden"},Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,paddingTop:15,paddingRight:15,paddingLeft:15,color:"#000",backgroundColor:"white"},sectionListItemStyle2:{fontSize:8,color:"gray",paddingLeft:15,paddingRight:15,backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},buttonNewChat:{justifyContent:"center",width:250,height:40,borderRadius:10},button:{justifyContent:"center",width:250,height:40,borderRadius:10},buttonchat:{justifyContent:"center",width:250,height:40,borderRadius:10},scroll:{flex:1,marginHorizontal:16},styleSendImageBtn:{flex:.5,backgroundColor:"#2E86C1",marginTop:0,marginLeft:0,marginRight:0,overflow:"hidden",marginBottom:0}}),Q=Object(o.a)();function $(){return Object(d.jsx)(s.a,{children:Object(d.jsxs)(Q.Navigator,{screenOptions:{headerTitleAlign:"center"},children:[Object(d.jsx)(Q.Screen,{name:"Menu",component:h}),Object(d.jsx)(Q.Screen,{name:"Chat",component:T}),Object(d.jsx)(Q.Screen,{name:"History",component:q}),Object(d.jsx)(Q.Screen,{name:"LiveChat",component:X})]})})}},261:function(e,t,n){e.exports=n(354)},269:function(e,t,n){e.exports=n.p+"static/media/Pepsi-Logo.32560c85.png"}},[[261,1,2]]]);
//# sourceMappingURL=app.621cc786.chunk.js.map